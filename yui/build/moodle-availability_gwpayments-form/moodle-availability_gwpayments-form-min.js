YUI.add("moodle-availability_gwpayments-form",function(c,e){M.availability_gwpayments=M.availability_gwpayments||{},M.availability_gwpayments.form=c.Object(M.core_availability.plugin),M.availability_gwpayments.form.initInner=function(e,t,a){this.currencies=e,this.accounts=t,this.defaults=a},M.availability_gwpayments.form.getNode=function(e){var t,a,i,n,l,s="";for(t in this.currencies)s=(s+='<option value="'+t+'" '+(e.currency===t||e.currency===undefined&&this.defaults.currency!==undefined&&this.defaults.currency===t?' selected="selected"':"")+" >")+this.currencies[t]+"</option>";for(i in a="",this.accounts)a=(a+='<option value="'+i+'" '+(e.accountid===i?' selected="selected" ':"")+" >")+this.accounts[i]+"</option>";return n="",n=(n=(n=(n=(n=(n=(n=(n+="<div><label>")+M.util.get_string("paymentaccount","availability_gwpayments")+('<select name="accountid" />'+a+"</select>"))+"</label></div>"+"<div><label>")+M.util.get_string("currency","availability_gwpayments")+('<select name="currency" />'+s+"</select>"))+"</label></div>"+"<div><label>")+M.util.get_string("cost","availability_gwpayments")+'<input name="cost" type="text" />')+"</label></div>"+"<div><label>")+M.util.get_string("vat","availability_gwpayments"),n=c.Node.create("<span>"+(n=n+'<input name="vat" type="text" />'+"</label></div>")+"</span>"),e.cost!==undefined?n.one("input[name=cost]").set("value",e.cost):this.defaults.cost!==undefined&&n.one("input[name=cost]").set("value",this.defaults.cost),e.vat!==undefined?n.one("input[name=vat]").set("value",e.vat):this.defaults.vat!==undefined&&n.one("input[name=vat]").set("value",this.defaults.vat),M.availability_gwpayments.form.addedEvents||(M.availability_gwpayments.form.addedEvents=!0,(l=c.one("#fitem_id_availabilityconditionsjson")).delegate("change",function(){M.core_availability.form.update()},".availability_gwpayments select[name=accountid]"),l.delegate("change",function(){M.core_availability.form.update()},".availability_gwpayments select[name=currency]"),l.delegate("valuechange",function(){M.core_availability.form.update()},".availability_gwpayments input")),n},M.availability_gwpayments.form.fillValue=function(e,t){e.accountid=t.one("select[name=accountid]").get("value"),e.currency=t.one("select[name=currency]").get("value"),e.cost=this.getValue("cost",t),e.vat=this.getValue("vat",t)},M.availability_gwpayments.form.getValue=function(e,t){e=t.one("input[name="+e+"]").get("value");return/^[0-9]+([.,][0-9]+)?$/.test(e)?parseFloat(e.replace(",",".")):e},M.availability_gwpayments.form.fillErrors=function(e,t){var a={};this.fillValue(a,t),(a.cost!==undefined&&"string"==typeof a.cost||a.cost<=0)&&e.push("availability_gwpayments:error_cost"),(a.vat!==undefined&&"string"==typeof a.vat||a.vat<0||100<a.vat)&&e.push("availability_gwpayments:error_vat")}},"@VERSION@",{requires:["base","node","event","moodle-core_availability-form"]});